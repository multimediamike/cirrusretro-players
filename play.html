<html>

<head>

<title>Cirrus Retro Player Test Bed</title>

<script src="play.js"></script>
<script>

var nowPlaying = false;
var currentTrack = 0;
var player = "/final/cr-gme-nsf.js";
var musicUrl = "/music-samples/akumajou-densetsu.nsf.xz";
//var player = "/final/cr-gme-spc.js";
//var musicUrl = "/music-samples/btbm.gamemusic.xz";
//var player = "/final/cr-vio2sf.js";
//var musicUrl = "/music-samples/jedi-alliance.psfarchive";
var trackCount = 5;

function toggleSound()
{
    playButton = document.getElementById('playButton');
    if (nowPlaying == true && playButton.value == "Pause")
    {
        nowPlaying = false;
        playButton.value = "Play";
        enableCrPlayerAudio(false);
    }
    else if (nowPlaying == false && playButton.value == "Play")
    {
        nowPlaying = true;
        playButton.value = "Pause";
        enableCrPlayerAudio(true);
    }
}

function prevTrack()
{
    if (currentTrack > 0)
        currentTrack--;
    else
        currentTrack = trackCount - 1;
    setCrTrack(currentTrack);
    updateTrackDisplay();
}

function nextTrack()
{
    currentTrack = (currentTrack + 1) % trackCount;
    setCrTrack(currentTrack);
    updateTrackDisplay();
}

function pageLoaded()
{
    var canvas = document.getElementById('visualizer');
    initializeCrPlayer(player, musicUrl, canvas, playerIsReady, currentTrack);
    updateTrackDisplay();
}

function updateTrackDisplay()
{
    var trackDisplay = document.getElementById('trackDisplay');
    trackDisplay.innerHTML = "Track " + (currentTrack+1) + " / " + trackCount;
}

function playerIsReady()
{
    playButton.value = "Pause";
    nowPlaying = true;
    startAudio();
}

</script>

</head>

<body onload="pageLoaded()">
<h1>Cirrus Retro Player Test Bed</h1>
<canvas id="visualizer" width="600" height="300"></canvas>
<p>
<input type="button" id="prevButton" onclick="prevTrack()" value=" << ">
<input type="button" id="playButton" onclick="toggleSound()" value="---">
<input type="button" id="nextButton" onclick="nextTrack()" value=" >> ">
</p>

<p>
<div id="trackDisplay">---</div>
</p>

</body>

</html>
